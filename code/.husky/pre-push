echo \"[Husky] checking for eslint errors and formatting using prettier.\"

cd code 

# Get the list of staged files
CHANGED_FILES=$(git diff --cached --name-only --diff-filter=d | grep -E '\.(js|jsx|ts|tsx|css|scss|json|md)$')

# Run ESLint on changed files
if [ -n "$CHANGED_FILES" ]; then
  echo "Running ESLint..."
  npx eslint $CHANGED_FILES
  if [ $? -ne 0 ]; then
    echo "ESLint found issues. Aborting commit."
    exit 1
  fi
else
  echo "No JavaScript/TypeScript files to lint."
fi

# Format the changed files using Prettier
if [ -n "$CHANGED_FILES" ]; then
  echo "Running Prettier..."
  npx prettier --write $CHANGED_FILES
else
  echo "No files to format."
fi
